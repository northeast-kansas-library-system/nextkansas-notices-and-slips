[% USE AuthorisedValues %]
[% USE Branches %]
[% USE Categories %]
[% USE ItemTypes %]
[% USE Dumper Indent=1 %]

<style>

  div {margin: .5in}

</style>

<div>

  <h1>! Dump variables !</h1><br /><br />

  <p>additional_text:</h2><br /><br /><pre>[% Dumper.dump(additional_text.unblessed) %]</pre><br /><br />
  <p>article_request:</h2><br /><br /><pre>[% Dumper.dump(article_request.unblessed) %]</pre><br /><br />
  <p>basket:</h2><br /><br /><pre>[% Dumper.dump(basket.unblessed) %]</pre><br /><br />
  <p>biblio:</h2><br /><br /><pre>[% Dumper.dump(biblio.unblessed) %]</pre><br /><br />
  <p>biblioitem:</h2><br /><br /><pre>[% Dumper.dump(biblioitem.unblessed) %]</pre><br /><br />
  <p>borrower_modification:</h2><br /><br /><pre>[% Dumper.dump(borrower_modification.unblessed) %]</pre><br /><br />
  <p>borrowers:</h2><br /><br /><pre>[% Dumper.dump(borrowers.unblessed) %]</pre><br /><br />
  <p>branch:</h2><br /><br /><pre>[% Dumper.dump(branch.unblessed) %]</pre><br /><br />
  <p>branches:</h2><br /><br /><pre>[% Dumper.dump(branches.unblessed) %]</pre><br /><br />
  <p>checkout:</h2><br /><br /><pre>[% Dumper.dump(checkout.unblessed) %]</pre><br /><br />
  <p>count:</h2><br /><br /><pre>[% Dumper.dump(count.unblessed) %]</pre><br /><br />
  <p>credit:</h2><br /><br /><pre>[% Dumper.dump(credit.unblessed) %]</pre><br /><br />
  <p>debit:</h2><br /><br /><pre>[% Dumper.dump(debit.unblessed) %]</pre><br /><br />
  <p>format:</h2><br /><br /><pre>[% Dumper.dump(format.unblessed) %]</pre><br /><br />
  <p>hold:</h2><br /><br /><pre>[% Dumper.dump(hold.unblessed) %]</pre><br /><br />
  <p>ill_bib_author:</h2><br /><br /><pre>[% Dumper.dump(ill_bib_author.unblessed) %]</pre><br /><br />
  <p>ill_bib_title:</h2><br /><br /><pre>[% Dumper.dump(ill_bib_title.unblessed) %]</pre><br /><br />
  <p>ill_full_metadata:</h2><br /><br /><pre>[% Dumper.dump(ill_full_metadata.unblessed) %]</pre><br /><br />
  <p>illrequest:</h2><br /><br /><pre>[% Dumper.dump(illrequest.unblessed) %]</pre><br /><br />
  <p>illrequestattributes:</h2><br /><br /><pre>[% Dumper.dump(illrequestattributes.unblessed) %]</pre><br /><br />
  <p>item:</h2><br /><br /><pre>[% Dumper.dump(item.unblessed) %]</pre><br /><br />
  <p>items:</h2><br /><br /><pre>[% Dumper.dump(items.unblessed) %]</pre><br /><br />
  <p>listname:</h2><br /><br /><pre>[% Dumper.dump(listname.unblessed) %]</pre><br /><br />
  <p>old_checkout:</h2><br /><br /><pre>[% Dumper.dump(old_checkout.unblessed) %]</pre><br /><br />
  <p>order:</h2><br /><br /><pre>[% Dumper.dump(order.unblessed) %]</pre><br /><br />
  <p>order loop:</h2><br /><br /><pre>[% Dumper.dump(order loop.unblessed) %]</pre><br /><br />
  <p>passwordreseturl:</h2><br /><br /><pre>[% Dumper.dump(passwordreseturl.unblessed) %]</pre><br /><br />
  <p>serial:</h2><br /><br /><pre>[% Dumper.dump(serial.unblessed) %]</pre><br /><br />
  <p>shareurl:</h2><br /><br /><pre>[% Dumper.dump(shareurl.unblessed) %]</pre><br /><br />
  <p>subscription:</h2><br /><br /><pre>[% Dumper.dump(subscription.unblessed) %]</pre><br /><br />
  <p>suggestion:</h2><br /><br /><pre>[% Dumper.dump(suggestion.unblessed) %]</pre><br /><br />
  <p>user:</h2><br /><br /><pre>[% Dumper.dump(user.unblessed) %]</pre><br /><br />

</div>

<div>

<h1>! Dump set variables !</h1><br /><br />

  <h2>change:</h2><br /><br /><pre>[% Dumper.dump(change.unblessed) %]</pre><br /><br />
  <h2>checkouts:</h2><br /><br /><pre>[% Dumper.dump(checkouts.unblessed) %]</pre><br /><br />
  <h2>news:</h2><br /><br /><pre>[% Dumper.dump(news.unblessed) %]</pre><br /><br />
  <h2>offsets:</h2><br /><br /><pre>[% Dumper.dump(offsets.unblessed) %]</pre><br /><br />
  <h2>old_checkouts:</h2><br /><br /><pre>[% Dumper.dump(old_checkouts.unblessed) %]</pre><br /><br />
  <h2>overdues:</h2><br /><br /><pre>[% Dumper.dump(overdues.unblessed) %]</pre><br /><br />
  <h2>tendered:</h2><br /><br /><pre>[% Dumper.dump(tendered.unblessed) %]</pre><br /><br />

</div>

<!-- commented out temporarily
<div>

  <h1>! Dump Branches data !</h1><br /><br />
  
  <h2>Branches.all():</h2><br /><br /><pre>[% Dumper.dump(Branches.all()) %]</pre><br /><br />

</div>
-->

<div>

  <h1>! Borrower data !</h1>

  <pre>

    &#91;% borrower.address %]
    &#91;% borrower.address2 %]
    &#91;% borrower.altcontactaddress1 %]
    &#91;% borrower.altcontactaddress2 %]
    &#91;% borrower.altcontactaddress3 %]
    &#91;% borrower.altcontactcountry %]
    &#91;% borrower.altcontactfirstname %]
    &#91;% borrower.altcontactphone %]
    &#91;% borrower.altcontactstate %]
    &#91;% borrower.altcontactsurname %]
    &#91;% borrower.altcontactzipcode %]
    &#91;% borrower.anonymized %]
    &#91;% borrower.auth_method %]
    &#91;% borrower.autorenew_checkouts %]
    &#91;% borrower.B_address %]
    &#91;% borrower.B_address2 %]
    &#91;% borrower.B_city %]
    &#91;% borrower.B_country %]
    &#91;% borrower.B_email %]
    &#91;% borrower.B_phone %]
    &#91;% borrower.B_state %]
    &#91;% borrower.B_streetnumber %]
    &#91;% borrower.B_streettype %]
    &#91;% borrower.B_zipcode %]
    &#91;% borrower.borrowernotes %]
    &#91;% borrower.borrowernumber %]
    &#91;% borrower.branchcode %]
    &#91;% borrower.cardnumber %]
    &#91;% borrower.categorycode %]
    &#91;% borrower.checkprevcheckout %]
    &#91;% borrower.city %]
    &#91;% borrower.contactfirstname %]
    &#91;% borrower.contactname %]
    &#91;% borrower.contactnote %]
    &#91;% borrower.contacttitle %]
    &#91;% borrower.country %]
    &#91;% borrower.date_renewed %]
    &#91;% borrower.dateenrolled %]
    &#91;% borrower.dateexpiry %]
    &#91;% borrower.dateofbirth %]
    &#91;% borrower.debarred %]
    &#91;% borrower.debarredcomment %]
    &#91;% borrower.email %]
    &#91;% borrower.emailpro %]
    &#91;% borrower.fax %]
    &#91;% borrower.firstname %]
    &#91;% borrower.flags %]
    &#91;% borrower.gonenoaddress %]
    &#91;% borrower.initials %]
    &#91;% borrower.lang %]
    &#91;% borrower.lastseen %]
    &#91;% borrower.login_attempts %]
    &#91;% borrower.lost %]
    &#91;% borrower.middle_name %]
    &#91;% borrower.mobile %]
    &#91;% borrower.opacnote %]
    &#91;% borrower.othernames %]
    &#91;% borrower.overdrive_auth_token %]
    &#91;% borrower.password %]
    &#91;% borrower.password_expiration_date %]
    &#91;% borrower.phone %]
    &#91;% borrower.phonepro %]
    &#91;% borrower.primary_contact_method %]
    &#91;% borrower.privacy %]
    &#91;% borrower.privacy_guarantor_checkouts %]
    &#91;% borrower.privacy_guarantor_fines %]
    &#91;% borrower.pronouns %]
    &#91;% borrower.relationship %]
    &#91;% borrower.secret %]
    &#91;% borrower.sex %]
    &#91;% borrower.sms_provider_id %]
    &#91;% borrower.smsalertnumber %]
    &#91;% borrower.sort1 %]
    &#91;% borrower.sort2 %]
    &#91;% borrower.state %]
    &#91;% borrower.streetnumber %]
    &#91;% borrower.streettype %]
    &#91;% borrower.surname %]
    &#91;% borrower.title %]
    &#91;% borrower.updated_on %]
    &#91;% borrower.userid %]
    &#91;% borrower.zipcode %]

    &#91;%# 
      Gets the name for borrower.categorycode instead of just the code. 
      Requires &#91;% USE Categories %].
    %]
    &#91;% Categories.GetName( borrower.categorycode ) %]

    &#91;%# 
      Gets the name for borrower.branchcode instead of just the code. 
      Requires &#91;% USE Branches %].
    %]
    &#91;% Branches.GetName( borrower.branchcode ) %]

    &#91;%# 
      Datetime example: 
      Datetime fields (such as borrower.lastseen) will display in YYYY-MM-DD HH:MM:SS format by default.
    %]
    &#91;% borrower.lastseen %]

    &#91;%# 
      Datetime example 1: 
      Datetime fields (such as borrower.lastseen) will display in YYYY-MM-DD HH:MM:SS format by default.
    %]
    &#91;% borrower.lastseen %]

    &#91;%# 
      Datetime example 2: 
      If you add "| $KohaDates" after a Datetime variable, 
      Koha will render the date without the time in the format specified in system preference _dateformat_.
    %]
    &#91;% borrower.lastseen | $KohaDates %]

    &#91;%# 
      Datetime example 3: 
      If you add "| $KohaDates with_hours => 1" after a Datetime variable, 
      Koha will render the date with hours:minutes:seconds in the format specified in system preference _dateformat_.
    %]
    &#91;% borrower.lastseen | $KohaDates with_hours => 1 %]

    &#91;%# 
      Date example 1: 
      Date fields (such as borrower.dateexpiry) will display in YYYY-MM-DD format by default.
    %]
    &#91;% borrower.dateexpiry %]

    &#91;%# 
      Date example 2: 
      If you add "| $KohaDates" after a Datetime variable, 
      Koha will render the date in the format specified in system preference _dateformat_.
    %]
    &#91;% borrower.dateexpiry | $KohaDates %]

    &#91;%# 
      Date example 2: 
      If you add "| $KohaDates" after a Datetime variable, 
      Koha will render the date in the format specified in system preference _dateformat_ and 
      it will add "00:00:00" (i.e. midnight) because date fields don't specify a time.
    %]
    &#91;% borrower.dateexpiry | $KohaDates %]

    
    &#91;%# 
      Gets branch data for the borrower's home branch.
      Requires &#91;% USE Branches %].
    %]
    &#91;% FOREACH borrower_branch IN Branches.all() %]

      &#91;% IF borrower_branch.branchcode == borrower.branchcode %]

        &#91;% borrower_branch.branchaddress1 %]
        &#91;% borrower_branch.branchaddress2 %]
        &#91;% borrower_branch.branchaddress3 %]
        &#91;% borrower_branch.branchcity %]
        &#91;% borrower_branch.branchcode %]
        &#91;% borrower_branch.branchcountry %]
        &#91;% borrower_branch.branchemail %]
        &#91;% borrower_branch.branchfax %]
        &#91;% borrower_branch.branchillemail %]
        &#91;% borrower_branch.branchip %]
        &#91;% borrower_branch.branchname %]
        &#91;% borrower_branch.branchnotes %]
        &#91;% borrower_branch.branchphone %]
        &#91;% borrower_branch.branchreplyto %]
        &#91;% borrower_branch.branchreturnpath %]
        &#91;% borrower_branch.branchstate %]
        &#91;% borrower_branch.branchurl %]
        &#91;% borrower_branch.branchzip %]
        &#91;% borrower_branch.geolocation %]
        &#91;% borrower_branch.issuing %]
        &#91;% borrower_branch.marcorgcode %]
        &#91;% borrower_branch.pickup_location %]
        &#91;% borrower_branch.public %]

      &#91;% END %]

    &#91;% END %]

  </pre>

  <h2>borrower:</h2><br /><br /><pre>[% Dumper.dump(borrower.unblessed) %]</pre><br /><br />

  <h2>Categories.GetName( borrower.categorycode )</h2><br /><br /><pre>[% Categories.GetName( borrower.categorycode ) %]</pre><br /><br />

  <h2>Branches.GetName( borrower.branchcode )</h2><br /><br /><pre>[% Branches.GetName( borrower.branchcode ) %]</pre><br /><br />

  <h2>borrower.lastseen: </h2><br /><br /><pre>[% borrower.lastseen %]</pre><br /><br />

  <h2>borrower.lastseen | $KohaDates: </h2><br /><br /><pre>[% borrower.lastseen | $KohaDates %]</pre><br /><br />

  <h2>borrower.lastseen | $KohaDates with_hours => 1: </h2><br /><br /><pre>[% borrower.lastseen | $KohaDates with_hours => 1 %]</pre><br /><br />

  <h2>borrower.dateexpiry: </h2><br /><br /><pre>[% borrower.dateexpiry %]</pre><br /><br />

  <h2>borrower.dateexpiry | $KohaDates: </h2><br /><br /><pre>[% borrower.dateexpiry | $KohaDates %]</pre><br /><br />

  <h2>borrower.dateexpiry | $KohaDates: </h2><br /><br /><pre>[% borrower.dateexpiry | $KohaDates with_hours => 1 %]</pre><br /><br />

  [% FOREACH borrower_branch IN Branches.all() %]

    [% IF borrower_branch.branchcode == borrower.branchcode %]

    <h2>-- Borrower branch information --</h2>

      <ul>
        <li><span style="font-weight: 1000"> borrower_branch.branchaddress1:</span> [% borrower_branch.branchaddress1 %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchaddress2:</span> [% borrower_branch.branchaddress2 %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchaddress3:</span> [% borrower_branch.branchaddress3 %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchcity:</span> [% borrower_branch.branchcity %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchcode:</span> [% borrower_branch.branchcode %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchcountry:</span> [% borrower_branch.branchcountry %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchemail:</span> [% borrower_branch.branchemail %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchfax:</span> [% borrower_branch.branchfax %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchillemail:</span> [% borrower_branch.branchillemail %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchip:</span> [% borrower_branch.branchip %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchname:</span> [% borrower_branch.branchname %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchnotes:</span> [% borrower_branch.branchnotes %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchphone:</span> [% borrower_branch.branchphone %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchreplyto:</span> [% borrower_branch.branchreplyto %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchreturnpath:</span> [% borrower_branch.branchreturnpath %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchstate:</span> [% borrower_branch.branchstate %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchurl:</span> [% borrower_branch.branchurl %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.branchzip:</span> [% borrower_branch.branchzip %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.geolocation:</span> [% borrower_branch.geolocation %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.issuing:</span> [% borrower_branch.issuing %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.marcorgcode:</span> [% borrower_branch.marcorgcode %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.pickup_location:</span> [% borrower_branch.pickup_location %]</li>
        <li><span style="font-weight: 1000"> borrower_branch.public:</span> [% borrower_branch.public %]</li>
      </ul>

    [% END %]

  [% END %]

</div>

<div>

  <h1>! Get biblio data from &#91;% overdues %] !</h1><br /><br />

  <pre>
    
    &#91;% FOREACH overdue IN overdues %]

      &#91;% SET biblio = overdue.item.biblio %]

        &#91;% biblio.abstract %]
        &#91;% biblio.author %]
        &#91;% biblio.biblionumber %]
        &#91;% biblio.copyrightdate %]
        &#91;% biblio.datecreated %]
        &#91;% biblio.frameworkcode %]
        &#91;% biblio.medium %]
        &#91;% biblio.notes %]
        &#91;% biblio.part_name %]
        &#91;% biblio.part_number %]
        &#91;% biblio.serial %]
        &#91;% biblio.seriestitle %]
        &#91;% biblio.subtitle %]
        &#91;% biblio.timestamp %]
        &#91;% biblio.title %]
        &#91;% biblio.unititle %]

    &#91;% END %]
    
  </pre>

  [% FOREACH overdue IN overdues %]

    [% SET biblio = overdue.item.biblio %]

    <h2>SET biblio = overdue.item.biblio:</h2><br /><br /><pre>[% Dumper.dump(biblio.unblessed) %]</pre><br /><br />

  [% END %]

</div>

<div>

  <h1>! Get item data from &#91;% overdues %] !</h1><br /><br />

  <pre>

    &#91;% USE AuthorisedValues %]
    &#91;% USE ItemTypes %]
    
    &#91;% FOREACH overdue IN overdues %]

      &#91;% SET item = overdue.item %]

        &#91;% item.barcode %]
        &#91;% item.biblioitemnumber %]
        &#91;% item.biblionumber %]
        &#91;% item.booksellerid %]
        &#91;% item.ccode %]
        &#91;% item.cn_sort %]
        &#91;% item.cn_source %]
        &#91;% item.coded_location_qualifier %]
        &#91;% item.copynumber %]
        &#91;% item.damaged %]
        &#91;% item.damaged_on %]
        &#91;% item.dateaccessioned %]
        &#91;% item.datelastborrowed %]
        &#91;% item.datelastseen %]
        &#91;% item.deleted_on %]
        &#91;% item.enumchron %]
        &#91;% item.exclude_from_local_holds_priority %]
        &#91;% item.holdingbranch %]
        &#91;% item.homebranch %]
        &#91;% item.issues %]
        &#91;% item.itemcallnumber %]
        &#91;% item.itemlost %]
        &#91;% item.itemlost_on %]
        &#91;% item.itemnotes %]
        &#91;% item.itemnotes_nonpublic %]
        &#91;% item.itemnumber %]
        &#91;% item.itype %]
        &#91;% item.location %]
        &#91;% item.materials %]
        &#91;% item.more_subfields_xml %]
        &#91;% item.new_status %]
        &#91;% item.notforloan %]
        &#91;% item.onloan %]
        &#91;% item.permanent_location %]
        &#91;% item.price %]
        &#91;% item.renewals %]
        &#91;% item.replacementprice %]
        &#91;% item.replacementpricedate %]
        &#91;% item.reserves %]
        &#91;% item.restricted %]
        &#91;% item.stack %]
        &#91;% item.stocknumber %]
        &#91;% item.timestamp %]
        &#91;% item.uri %]
        &#91;% item.withdrawn %]
        &#91;% item.withdrawn_on %]

        &#91;%# 
          Gets the description for the item level location code from authorised_values.lib.
          Requires &#91;% USE AuthorisedValues %].
        %]
        &#91;% AuthorisedValues.GetByCode( 'LOC', item.location ) %]

        &#91;%# 
          Gets the description for the item level permanent location code from authorised_values.lib.
          Requires &#91;% USE AuthorisedValues %].
        %]
        &#91;% AuthorisedValues.GetByCode( 'LOC', item.permanent_location ) %]
        
        &#91;%# Gets the description for the item level item type from itemtypes.description %]
        &#91;% ItemTypes.GetDescription(item.itype) %]

        &#91;%# 
          Gets the description for the item level collection code from authorised_values.lib. 
          Requires &#91;% USE AuthorisedValues %].
        %]
        &#91;% AuthorisedValues.GetByCode( 'CCODE', item.ccode ) %]   

    &#91;% END %]

    &#91;%# 
      Gets branch data for the branch where the items were checked out at.
      Requires &#91;% USE Branches %].
    %]
    &#91;% FOREACH odue_checked_out_at IN Branches.all() %]

      &#91;% IF odue_checked_out_at.branchcode == overdue.branchcode %]

        &#91;% odue_checked_out_at.branchaddress1 %]
        &#91;% odue_checked_out_at.branchaddress2 %]
        &#91;% odue_checked_out_at.branchaddress3 %]
        &#91;% odue_checked_out_at.branchcity %]
        &#91;% odue_checked_out_at.branchcode %]
        &#91;% odue_checked_out_at.branchcountry %]
        &#91;% odue_checked_out_at.branchemail %]
        &#91;% odue_checked_out_at.branchfax %]
        &#91;% odue_checked_out_at.branchillemail %]
        &#91;% odue_checked_out_at.branchip %]
        &#91;% odue_checked_out_at.branchname %]
        &#91;% odue_checked_out_at.branchnotes %]
        &#91;% odue_checked_out_at.branchphone %]
        &#91;% odue_checked_out_at.branchreplyto %]
        &#91;% odue_checked_out_at.branchreturnpath %]
        &#91;% odue_checked_out_at.branchstate %]
        &#91;% odue_checked_out_at.branchurl %]
        &#91;% odue_checked_out_at.branchzip %]
        &#91;% odue_checked_out_at.geolocation %]
        &#91;% odue_checked_out_at.issuing %]
        &#91;% odue_checked_out_at.marcorgcode %]
        &#91;% odue_checked_out_at.pickup_location %]
        &#91;% odue_checked_out_at.public %]

      &#91;% END %]

    &#91;% END %]

    &#91;% FOREACH odue_item_owned_by IN Branches.all() %]

      &#91;% IF odue_item_owned_by.branchcode == item.homebranch %]

        &#91;% odue_item_owned_by.branchaddress1 %]
        &#91;% odue_item_owned_by.branchaddress2 %]
        &#91;% odue_item_owned_by.branchaddress3 %]
        &#91;% odue_item_owned_by.branchcity %]
        &#91;% odue_item_owned_by.branchcode %]
        &#91;% odue_item_owned_by.branchcountry %]
        &#91;% odue_item_owned_by.branchemail %]
        &#91;% odue_item_owned_by.branchfax %]
        &#91;% odue_item_owned_by.branchillemail %]
        &#91;% odue_item_owned_by.branchip %]
        &#91;% odue_item_owned_by.branchname %]
        &#91;% odue_item_owned_by.branchnotes %]
        &#91;% odue_item_owned_by.branchphone %]
        &#91;% odue_item_owned_by.branchreplyto %]
        &#91;% odue_item_owned_by.branchreturnpath %]
        &#91;% odue_item_owned_by.branchstate %]
        &#91;% odue_item_owned_by.branchurl %]
        &#91;% odue_item_owned_by.branchzip %]
        &#91;% odue_item_owned_by.geolocation %]
        &#91;% odue_item_owned_by.issuing %]
        &#91;% odue_item_owned_by.marcorgcode %]
        &#91;% odue_item_owned_by.pickup_location %]
        &#91;% odue_item_owned_by.public %]

      &#91;% END %]

    &#91;% END %] 

  </pre>

  [% FOREACH overdue IN overdues %]

    [% SET item = overdue.item %]

    <h2>SET item = overdue.item:</h2><br /><br /><pre>[% Dumper.dump(item.unblessed) %]</pre><br /><br />

    <h2>AuthorisedValues.GetByCode( 'LOC', item.location ): </h2><br /><br /><pre>[% AuthorisedValues.GetByCode( 'LOC', item.location ) %]</pre><br /><br />

    <h2>AuthorisedValues.GetByCode( 'LOC', item.permanent_location ): </h2><br /><br /><pre>[% AuthorisedValues.GetByCode( 'LOC', item.permanent_location ) %]</pre><br /><br />

    <h2>ItemTypes.GetDescription(item.itype): </h2><br /><br /><pre>[% ItemTypes.GetDescription(item.itype) %]</pre><br /><br />

    <h2>AuthorisedValues.GetByCode( 'CCODE', item.ccode ): </h2><br /><br /><pre>[% AuthorisedValues.GetByCode( 'CCODE', item.ccode ) %]</pre><br /><br />


    [% FOREACH odue_checked_out_at IN Branches.all() %]

      [% IF odue_checked_out_at.branchcode == overdue.branchcode %]

        <ul>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchaddress1:</span> [% odue_checked_out_at.branchaddress1 %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchaddress2:</span> [% odue_checked_out_at.branchaddress2 %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchaddress3:</span> [% odue_checked_out_at.branchaddress3 %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchcity:</span> [% odue_checked_out_at.branchcity %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchcode:</span> [% odue_checked_out_at.branchcode %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchcountry:</span> [% odue_checked_out_at.branchcountry %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchemail:</span> [% odue_checked_out_at.branchemail %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchfax:</span> [% odue_checked_out_at.branchfax %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchillemail:</span> [% odue_checked_out_at.branchillemail %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchip:</span> [% odue_checked_out_at.branchip %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchname:</span> [% odue_checked_out_at.branchname %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchnotes:</span> [% odue_checked_out_at.branchnotes %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchphone:</span> [% odue_checked_out_at.branchphone %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchreplyto:</span> [% odue_checked_out_at.branchreplyto %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchreturnpath:</span> [% odue_checked_out_at.branchreturnpath %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchstate:</span> [% odue_checked_out_at.branchstate %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchurl:</span> [% odue_checked_out_at.branchurl %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.branchzip:</span> [% odue_checked_out_at.branchzip %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.geolocation:</span> [% odue_checked_out_at.geolocation %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.issuing:</span> [% odue_checked_out_at.issuing %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.marcorgcode:</span> [% odue_checked_out_at.marcorgcode %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.pickup_location:</span> [% odue_checked_out_at.pickup_location %]</li>
          <li><span style="font-weight: 1000"> odue_checked_out_at.public:</span> [% odue_checked_out_at.public %]</li>
        </ul>

      [% END %]

    [% END %]

    [% FOREACH odue_item_owned_by IN Branches.all() %]

      [% IF odue_item_owned_by.branchcode == item.homebranch %]

        <ul>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchaddress1:</span> [% odue_item_owned_by.branchaddress1 %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchaddress2:</span> [% odue_item_owned_by.branchaddress2 %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchaddress3:</span> [% odue_item_owned_by.branchaddress3 %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchcity:</span> [% odue_item_owned_by.branchcity %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchcode:</span> [% odue_item_owned_by.branchcode %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchcountry:</span> [% odue_item_owned_by.branchcountry %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchemail:</span> [% odue_item_owned_by.branchemail %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchfax:</span> [% odue_item_owned_by.branchfax %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchillemail:</span> [% odue_item_owned_by.branchillemail %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchip:</span> [% odue_item_owned_by.branchip %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchname:</span> [% odue_item_owned_by.branchname %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchnotes:</span> [% odue_item_owned_by.branchnotes %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchphone:</span> [% odue_item_owned_by.branchphone %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchreplyto:</span> [% odue_item_owned_by.branchreplyto %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchreturnpath:</span> [% odue_item_owned_by.branchreturnpath %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchstate:</span> [% odue_item_owned_by.branchstate %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchurl:</span> [% odue_item_owned_by.branchurl %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.branchzip:</span> [% odue_item_owned_by.branchzip %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.geolocation:</span> [% odue_item_owned_by.geolocation %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.issuing:</span> [% odue_item_owned_by.issuing %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.marcorgcode:</span> [% odue_item_owned_by.marcorgcode %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.pickup_location:</span> [% odue_item_owned_by.pickup_location %]</li>
          <li><span style="font-weight: 1000"> odue_item_owned_by.public:</span> [% odue_item_owned_by.public %]</li>
        </ul>

      [% END %]

    [% END %] 

  [% END %]

  

</div>

<div>

  <h1>! Get biblioitem data from &#91;% overdues %] !</h1><br /><br />

  <pre>

    &#91;% USE AuthorisedValues %]
    &#91;% USE ItemTypes %]

    &#91;% FOREACH overdue IN overdues %]

      &#91;% SET biblioitem = overdue.item.biblio.biblioitem %]

        &#91;% biblioitem.agerestriction %]
        &#91;% biblioitem.biblioitemnumber %]
        &#91;% biblioitem.biblionumber %]
        &#91;% biblioitem.cn_class %]
        &#91;% biblioitem.cn_item %]
        &#91;% biblioitem.cn_sort %]
        &#91;% biblioitem.cn_source %]
        &#91;% biblioitem.cn_suffix %]
        &#91;% biblioitem.collectionissn %]
        &#91;% biblioitem.collectiontitle %]
        &#91;% biblioitem.collectionvolume %]
        &#91;% biblioitem.ean %]
        &#91;% biblioitem.editionresponsibility %]
        &#91;% biblioitem.editionstatement %]
        &#91;% biblioitem.illus %]
        &#91;% biblioitem.isbn %]
        &#91;% biblioitem.issn %]
        &#91;% biblioitem.itemtype %]
        &#91;% biblioitem.lccn %]
        &#91;% biblioitem.notes %]
        &#91;% biblioitem.number %]
        &#91;% biblioitem.pages %]
        &#91;% biblioitem.place %]
        &#91;% biblioitem.publicationyear %]
        &#91;% biblioitem.publishercode %]
        &#91;% biblioitem.size %]
        &#91;% biblioitem.timestamp %]
        &#91;% biblioitem.totalissues %]
        &#91;% biblioitem.url %]
        &#91;% biblioitem.volume %]
        &#91;% biblioitem.volumedate %]
        &#91;% biblioitem.volumedesc %]

        &#91;%# 
          Gets the description for the biblio level location code from authorised_values.lib. 
          This assumes your Koha to MARC mapping is set to map your bib-level shelving location to biblioitems.agerestriction.  
          If your library uses a different mapping, you'll need to adjust this code for your library. 
          Requires &#91;% USE AuthorisedValues %].
        %]
        &#91;% AuthorisedValues.GetByCode( 'LOC', biblioitem.agerestriction ) %]
        
        &#91;%# 
          Gets the description for the biblio level item type from itemtypes.description. 
          This is assuming you have your Koha to MARC mapping set up to map your record-level item type to biblioitems.itemtype.  
          If your library uses a different mapping, you'll need to adjust this code for your library.
          Requires &#91;% USE ItemTypes %].
        %]
        &#91;% ItemTypes.GetDescription(biblioitem.itemtype) %]

        &#91;%# 
          Gets the description for the biblio level collection code from authorised_values.lib. 
          This is assuming you have your Koha to MARC mapping set up to map your bib-level collection code to biblioitems.cn_sort.  
          If your library uses a different mapping, you'll need to adjust this code for your library. 
          Requires &#91;% USE AuthorisedValues %].
        %]
        &#91;% AuthorisedValues.GetByCode( 'CCODE', biblioitem.cn_sort ) %]

      &#91;% END %]

  </pre>

  [% FOREACH overdue IN overdues %]

    [% SET biblioitem = overdue.item.biblio.biblioitem %]

    <h2>SET biblioitem = overdue.item.biblio.biblioitem:</h2><br /><br /><pre>[% Dumper.dump(biblioitem.unblessed) %]</pre><br /><br />

    <h2>AuthorisedValues.GetByCode( 'LOC', biblioitem.agerestriction ): </h2><br /><br /><pre>[% AuthorisedValues.GetByCode( 'LOC', biblioitem.agerestriction ) %]</pre><br /><br />

    <h2>ItemTypes.GetDescription(biblioitem.itemtype):</h2><br /><br /><pre>[% ItemTypes.GetDescription(biblioitem.itemtype) %]</pre><br /><br />

    <h2>AuthorisedValues.GetByCode( 'CCODE', biblioitem.cn_sort ): </h2><br /><br /><pre>[% AuthorisedValues.GetByCode( 'CCODE', biblioitem.cn_sort ) %]</pre><br /><br />

  [% END %]

</div>